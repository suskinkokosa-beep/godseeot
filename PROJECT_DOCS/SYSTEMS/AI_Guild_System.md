# Система AI-гильдий

## Обзор

AI-гильдии - это NPC-организации, которые ведут себя как живые игроки. Они строят острова, патрулируют территорию, торгуют и воюют.

## Типы AI-гильдий

### 1. Торговцы (TRADER)
- **Пример**: "Sailing Coin"
- **Поведение**: Торговля, установка маршрутов
- **Ресурсы**: Много валюты, товары
- **Отношение**: Миролюбивые, любят стабильность

### 2. Военные (WARRIOR)
- **Пример**: "Storm Order"
- **Поведение**: Патрулирование, защита территории
- **Ресурсы**: Оружие, металл
- **Отношение**: Нейтральные, защищают свою территорию

### 3. Пираты (PIRATE)
- **Пример**: "Kraken Maw"
- **Поведение**: Атаки на игроков, грабежи
- **Ресурсы**: Разное
- **Отношение**: Враждебные, нападают на слабых

### 4. Исследователи (EXPLORER)
- **Пример**: "Sea Explorers"
- **Поведение**: Исследование новых зон
- **Ресурсы**: Инструменты, карты
- **Отношение**: Дружелюбные, помогают исследователям

### 5. Религиозные (RELIGIOUS)
- **Пример**: "Abyssal Choir"
- **Поведение**: Ритуалы, призыв монстров
- **Ресурсы**: Магические кристаллы
- **Отношение**: Нейтральные, имеют свои цели

### 6. Созидатели (CREATOR)
- **Пример**: "The Creators"
- **Поведение**: Строительство, развитие
- **Ресурсы**: Много материалов
- **Отношение**: Миролюбивые, помогают в строительстве

## Дипломатия

### Статусы отношений

1. **Нейтралитет (NEUTRAL)**
   - Стартовое отношение
   - Ничего особенного не происходит

2. **Торговля (TRADE)**
   - Можно торговать
   - Доступ к особым товарам
   - Скидки

3. **Мир (PEACE)**
   - Положительные отношения
   - Помощь в случае необходимости
   - Доступ к квестам

4. **Война (WAR)**
   - Враждебные отношения
   - AI-гильдия атакует игрока
   - Нет доступа к торговле

5. **Вассалитет (VASSAL)**
   - Игрок подчинён гильдии
   - Помощь от гильдии
   - Ограничения на действия

## Поведение AI-гильдий

### Состояния поведения

1. **Патрулирование (patrol)**
   - Движение кораблей по территории
   - Защита своих зон
   - Реагирование на угрозы

2. **Торговля (trade)**
   - Установка торговых маршрутов
   - Отправка торговых кораблей
   - Взаимодействие с игроками

3. **Война (war)**
   - Поиск целей для атаки
   - Координация атак
   - Защита от ответных ударов

4. **Строительство (build)**
   - Расширение острова
   - Создание построек
   - Развитие инфраструктуры

5. **Исследование (explore)**
   - Отправка экспедиций
   - Открытие новых зон
   - Создание карт

## Репутация

### Уровни репутации

- **0-30**: Враждебно
- **31-50**: Нейтрально
- **51-70**: Дружелюбно
- **71-100**: Превознесён

### Изменение репутации

Репутация меняется от действий игрока:
- **Помощь гильдии**: +репутация
- **Атака на гильдию**: -репутация
- **Торговля**: +небольшая репутация
- **Выполнение квестов**: +репутация

### Автоматическое изменение дипломатии

- **Репутация ≥ 70**: Автоматический переход к миру
- **Репутация ≤ 30** (для пиратов): Автоматическое объявление войны

## Территория

Каждая AI-гильдия контролирует территорию:
- **Размер**: ~500-1000 м вокруг острова
- **Точки контроля**: 8 точек вокруг острова
- **Защита**: Корабли патрулируют территорию

## Торговые маршруты

AI-гильдии создают торговые маршруты:
- **От и До**: Позиции маршрута
- **Товары**: Что перевозится
- **Частота**: Как часто отправляется корабль
- **Безопасность**: Защита маршрута

## Взаимодействие с игроками

### Квесты
- AI-гильдии предлагают квесты
- Награды: Репутация, валюта, предметы

### Торговля
- Уникальные товары
- Динамические цены
- Скидки при высокой репутации

### Войны
- AI-гильдии могут нападать
- Игроки могут атаковать гильдии
- Разрушение баз меняет поведение

## Примеры гильдий

### Sailing Coin (Торговцы)
```
Тип: TRADER
Позиция: (1000, 0, 1000)
Поведение: trade
Ресурсы: shells: 10000, gold: 500
Торговые маршруты: 3 активных
```

### Kraken Maw (Пираты)
```
Тип: PIRATE
Позиция: (2000, 0, 500)
Поведение: patrol
Ресурсы: shells: 5000
Территория: Агрессивная патрульная зона
```

### Abyssal Choir (Религиозные)
```
Тип: RELIGIOUS
Позиция: (3000, -100, 3000)
Поведение: patrol
Ресурсы: shells: 8000, magic_crystals: 50
Особенность: Призывают монстров
```

## Интеграция с другими системами

### Репутация фракций
- AI-гильдии связаны с фракциями
- Действия с гильдией влияют на репутацию фракции

### Мировые события
- AI-гильдии участвуют в событиях
- Могут создавать события (нашествия, восстания)

### Экспедиции
- Игроки могут присоединяться к экспедициям гильдий
- Гильдии отправляют собственные экспедиции

