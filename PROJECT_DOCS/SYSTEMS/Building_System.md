# Система Строительства с Модулями

## Обзор

Система строительства Isleborn Online поддерживает модульную архитектуру построек. Каждую постройку можно улучшать, добавляя различные модули, которые расширяют функциональность.

## Типы построек

### 1. Базовые постройки (BuildingType.BASIC)
- **Костёр** - базовая постройка для готовки и освещения
- **Сушилка** - для сушки рыбы и продуктов

### 2. Производственные (BuildingType.PRODUCTION)
- **Мастерская** - для базового крафта
- **Верфь** - для строительства кораблей
- **Кузница** - для работы с металлом

### 3. Защитные (BuildingType.DEFENSIVE)
- **Башни** - с луками, арбалетами
- **Стены** - защита острова
- **Катапульты/Баллисты** - дальнобойная оборона

### 4. Магические (BuildingType.MAGICAL)
- **Рунические тотемы** - магические эффекты
- **Кристальные колодцы** - регенерация маны
- **Обсерватории** - предсказание событий

### 5. Декоративные (BuildingType.DECORATIVE)
- **Статуи** - повышение престижа
- **Фонтаны** - улучшение настроения NPC
- **Флаги** - идентификация острова

### 6. Склады (BuildingType.STORAGE)
- **Склад ресурсов** - хранение материалов

### 7. Жильё (BuildingType.HOUSING)
- **Хижины** - жильё для NPC

### 8. Фермы (BuildingType.FARMING)
- **Фермы** - выращивание ресурсов

## Модули построек

Каждая постройка имеет ограниченное количество слотов для модулей (обычно 2-4).

### Производственные модули
- **Печь (PROD_FURNACE)** - ускорение крафта на 20%, эффективность топлива +10%
- **Верстак (PROD_WORKBENCH)** - базовый модуль для крафта
- **Горн (PROD_FORGE)** - улучшенная обработка металла
- **Наковальня (PROD_ANVIL)** - качество крафта +15%
- **Причал (PROD_DOCK)** - для верфи
- **Сушилка (PROD_DRYING_RACK)** - сушка продуктов

### Защитные модули
- **Башня (DEF_TOWER)** - урон 10, радиус 30 м
- **Стена (DEF_WALL)** - защита территории
- **Катапульта (DEF_CATAPULT)** - дальнобойная атака
- **Баллиста (DEF_BALLISTA)** - точная дальнобойная атака
- **Тотемы (DEF_TOTEM)** - магическая защита

### Магические модули
- **Рунический тотем (MAG_RUNIC_TOTEM)** - сила магии +20%, радиус ауры 50 м
- **Кристальный колодец (MAG_CRYSTAL_WELL)** - регенерация маны
- **Стол зачарования (MAG_ENCHANTING_TABLE)** - зачарование предметов
- **Обсерватория (MAG_OBSERVATORY)** - предсказание событий

## Уровни построек

Каждая постройка может быть улучшена до 5 уровня:
- **Уровень 1**: Базовый
- **Уровень 2**: +30% прочности, +1 слот модулей
- **Уровень 3**: +30% прочности, +1 слот модулей, улучшенные эффекты
- **Уровень 4**: +30% прочности, +1 слот модулей, новые возможности
- **Уровень 5**: Максимальный уровень, все улучшения

## Строительство

### Процесс строительства

1. **Выбор места** - игрок выбирает позицию на острове
2. **Начало строительства** - создаётся объект BuildingData
3. **Прогресс** - постройка строится в реальном времени (от 5 до 300 секунд)
4. **Завершение** - постройка готова к использованию

### Требования

- **Уровень острова** - каждая постройка требует минимальный уровень острова
- **Ресурсы** - материалы для строительства
- **Свободное место** - достаточно места на острове

## Модули

### Добавление модулей

Модули можно добавлять только к построенным зданиям:
1. Выбрать постройку
2. Открыть меню модулей
3. Выбрать модуль из доступных
4. Добавить модуль (требует ресурсы)

### Улучшение модулей

Модули можно улучшать до 3 уровня:
- **Уровень 1**: Базовый
- **Уровень 2**: +20% эффективности, +20% прочности
- **Уровень 3**: +30% эффективности, +30% прочности

## Эффекты построек

Постройки предоставляют различные эффекты:

### Базовые эффекты
- **Cooking** - готовка еды
- **Light** - освещение
- **Crafting** - крафт предметов
- **Defense** - защита острова

### Комбинированные эффекты

Эффекты от модулей комбинируются с базовыми эффектами постройки:
- Множители складываются
- Аддитивные эффекты суммируются

## Ремонт и разрушение

### Ремонт

Постройки можно ремонтировать:
- Требует ресурсы (дерево, камень, металл)
- Восстанавливает здоровье постройки
- Модули ремонтируются отдельно

### Разрушение

Постройки могут быть разрушены:
- Монстрами во время рейдов
- Игроками в PvP
- При уничтожении все модули теряются

## Примеры использования

### Базовый костёр
```
Тип: BASIC
Уровень: 1
Модули: 0
Эффекты: cooking, light
```

### Верфь с улучшениями
```
Тип: PRODUCTION
Уровень: 3
Модули:
  - Причал (Уровень 2)
  - Верстак (Уровень 1)
  - Склад (Уровень 1)
Эффекты: ship_crafting, cargo_storage
```

### Защитная башня
```
Тип: DEFENSIVE
Уровень: 4
Модули:
  - Башня с луками (Уровень 3)
  - Укрепления (Уровень 2)
Эффекты: defense, range: 50, damage: 25
```

