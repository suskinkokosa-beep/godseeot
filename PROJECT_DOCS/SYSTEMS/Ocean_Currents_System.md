# Система Течений Океана

## Обзор

Система течений влияет на движение кораблей, открывает новые маршруты и создаёт стратегические возможности.

## Типы течений

### 1. Обычное течение (NORMAL)
- **Характеристика**: Стандартное течение
- **Эффект**: Ускорение корабля в 1.2 раза
- **Где встречается**: Все биомы

### 2. Сильное течение (STRONG)
- **Характеристика**: Мощное течение
- **Эффект**: Ускорение в 1.5 раза, снижение стабильности на 10%
- **Где встречается**: Deep Blue, открытое море

### 3. Водоворот (WHIRLPOOL)
- **Характеристика**: Захватывающее течение
- **Эффект**: Ускорение в 2.0 раза, урон 5/сек, шанс телепортации 5%
- **Где встречается**: Blackwater

### 4. Магическое течение (MAGICAL)
- **Характеристика**: Окутанное магией
- **Эффект**: Ускорение в 1.3 раза, регенерация маны +2.0/сек
- **Где встречается**: Mist Sea, магические зоны

### 5. Штормовое течение (STORM)
- **Характеристика**: Опасное течение в шторм
- **Эффект**: Ускорение в 1.4 раза, видимость -50%, урон 2/сек
- **Где встречается**: Зоны штормов

## Влияние на корабли

### Применение течения

Течение влияет на скорость и направление корабля:
- **Направление**: Корабль тянет в направлении течения
- **Скорость**: Добавляется дополнительная скорость
- **Комбинирование**: Несколько течений комбинируются

### Формула влияния

```
Влияние = (1.0 - расстояние / радиус) * сила
Скорость_течения = направление * влияние * 2.0
Новая_скорость = текущая_скорость + скорость_течения
```

## Радиус влияния

Каждое течение имеет радиус влияния:
- **Обычное**: 100-150 м
- **Сильное**: 150-200 м
- **Водоворот**: 80-100 м
- **Магическое**: 120-180 м
- **Штормовое**: 100-150 м

Влияние уменьшается с расстоянием от центра.

## Эффекты течений

### Обычные эффекты
- **speed_multiplier**: Множитель скорости корабля

### Специальные эффекты
- **stability_reduction**: Снижение стабильности
- **damage_per_second**: Урон в секунду
- **teleport_chance**: Шанс телепортации
- **mana_regen_boost**: Регенерация маны
- **visibility_reduction**: Снижение видимости

## Генерация течений

### Стартовые течения

При загрузке мира создаются базовые течения:
- **Tropical Shallow**: Обычные течения
- **Deep Blue**: Сильные течения
- **Mist Sea**: Магические течения
- **Blackwater**: Водовороты

### Динамические течения

Новые течения могут создаваться:
- Во время штормов
- В результате магических событий
- При активации порталов

## Стратегическое использование

### Ускорение путешествий

Использование течений позволяет:
- Быстрее достигать целей
- Экономить топливо/выносливость
- Уходить от преследования

### Опасности

Некоторые течения опасны:
- **Водовороты**: Могут телепортировать в неизвестное место
- **Штормовые**: Наносят урон кораблю
- **Сильные**: Снижают контроль над кораблём

### Тактика PvP

- Использование течений для маневрирования
- Блокировка путей противника
- Использование водоворотов для побега

## Интеграция с другими системами

### Погода
- Штормы создают штормовые течения
- Погода влияет на силу течений

### Биомы
- Разные биомы имеют характерные течения
- Blackwater имеет уникальные водовороты

### Навигация
- Течения отображаются на карте
- Игроки могут прокладывать маршруты по течениям

## Примеры использования

### Обычное течение
```
Позиция: (100, 0, 100)
Направление: (1, 0, 0)
Тип: NORMAL
Сила: 1.2
Радиус: 150 м
Эффект: Ускорение кораблей на восток
```

### Водоворот
```
Позиция: (1500, -200, 1500)
Направление: (0, -0.2, 1)
Тип: WHIRLPOOL
Сила: 2.0
Радиус: 100 м
Эффект: Сильное течение вниз и вперёд, шанс телепортации
```

